{
  "version": "1.1",
  "lastUpdated": "2026-01-28T00:00:00Z",

  "use": [
    {
      "item": "Native apps over Docker for GPU-intensive workloads",
      "reason": "Metal GPU acceleration not available in Docker on Mac",
      "examples": ["Ollama", "ML inference"],
      "addedOn": "2026-01-13"
    },
    {
      "item": "Minimal local model setup - Claude for real work",
      "reason": "Use Claude (Sonnet/Opus) for all critical code work. Local Ollama only for embeddings and cheap tasks (commit msgs, Enchanted queries).",
      "models": {
        "generation": "gemma3:4b-it-qat",
        "embeddings": "nomic-embed-text"
      },
      "addedOn": "2026-01-17",
      "lastUpdated": "2026-01-28"
    }
  ],

  "avoid": [
    {
      "item": "Running LLMs in Docker on Mac",
      "reason": "No Metal GPU = 40x slower inference",
      "alternative": "Use native Ollama installation",
      "addedOn": "2026-01-13"
    },
    {
      "item": "Redundant tools with overlapping functionality",
      "reason": "Simplicity, less maintenance, fewer resources",
      "example": "Removed Open WebUI, AnythingLLM (claude-dash memory_query handles RAG)",
      "addedOn": "2026-01-13",
      "lastUpdated": "2026-01-19"
    },
    {
      "item": "Using local LLMs for critical code work",
      "reason": "Quality matters. Claude (Sonnet/Opus) produces better code than local models.",
      "alternative": "Use Claude for code generation, debugging, reviews. Local only for embeddings and cheap tasks.",
      "addedOn": "2026-01-28"
    }
  ],

  "conventions": [
    {
      "topic": "role hierarchy and decision making",
      "rule": "User is ultimate decision maker (Product Owner/Tech Lead). Claude Sonnet is Senior Developer (leads technical design, architecture, coding). Local Ollama is SUPPORT TOOL (embeddings, commit messages, cheap queries only).",
      "roles": {
        "user": "Final decision maker, product requirements, feature approval",
        "claude_sonnet": "Senior developer - architecture, design, complex coding, technical leadership",
        "claude_opus": "Architect - complex system design, high-stakes decisions",
        "gemma3_4b_qat": "Support tool - commit messages, Enchanted queries, summarization only",
        "nomic_embed": "Embeddings - powers semantic search"
      },
      "workflow": "Claude designs and codes. Local models only for embeddings and cheap non-critical tasks.",
      "priority": "critical",
      "addedOn": "2026-01-17",
      "lastUpdated": "2026-01-28"
    },
    {
      "topic": "claude workflow",
      "rule": "Use MCP memory tools (memory_query, memory_search, memory_functions) for instant lookups. Claude handles ALL code work directly.",
      "priority": "critical",
      "addedOn": "2025-12-15",
      "lastUpdated": "2026-01-28"
    },
    {
      "topic": "model selection for agents",
      "rule": "Use gradient approach: Haiku ($) -> Sonnet ($$) -> Opus ($$$$). Reserve Opus for genuinely complex architecture only (~25% of planning). Use Sonnet for 75% of planning and ALL implementation.",
      "decision_tree": {
        "planning": {
          "complex": "Opus - Greenfield architecture, multiple non-obvious approaches, high reversal cost, cross-cutting concerns",
          "standard": "Sonnet - Following patterns, clear approach, well-understood problems, refactoring (75% of cases)"
        },
        "implementation": "Sonnet - ALWAYS use Sonnet, even for Opus-planned features",
        "exploration": "Haiku - Fast file/code exploration",
        "quick_tasks": "Haiku - Formatting, simple refactors, debug logging, documentation"
      },
      "examples": [
        "Task(model: 'opus') ONLY for genuinely complex architecture (e.g., 'design offline-first sync system')",
        "Task(model: 'sonnet') for standard planning (e.g., 'plan user profile screen')",
        "Task(model: 'sonnet') for ALL implementation/coding",
        "Task(model: 'haiku') for exploration, simple tasks"
      ],
      "priority": "critical",
      "addedOn": "2025-12-18",
      "lastUpdated": "2026-01-10"
    },
    {
      "topic": "ollama local ai tools",
      "rule": "Minimal Ollama setup: gemma3:4b-it-qat (cheap queries), nomic-embed-text (embeddings). Do NOT use local models for code work - use Claude instead.",
      "models": {
        "generation": "gemma3:4b-it-qat",
        "embeddings": "nomic-embed-text"
      },
      "installation": "native (not Docker)",
      "port": 11434,
      "when_to_use": {
        "embeddings": "Automatic - powers semantic search",
        "commit_messages": "mlx commit - Generate commit messages",
        "enchanted_queries": "Mobile app queries via local API"
      },
      "when_to_skip": "All code work - use Claude instead",
      "tools": {
        "mlx q <project> <question>": "Quick hybrid search queries",
        "mlx commit": "Generate commit messages (local)"
      },
      "priority": "critical",
      "addedOn": "2025-12-31",
      "lastUpdated": "2026-01-28"
    },
    {
      "topic": "gemini cli integration",
      "rule": "Gemini CLI is available as a complementary AI tool. SUGGEST using it for: (1) parallel subtasks, (2) research/comparison tasks, (3) second opinions. Always ASK before invoking.",
      "usage": {
        "oneShot": "gemini \"prompt\" 2>/dev/null",
        "withModel": "gemini -m gemini-2.5-pro \"prompt\" 2>/dev/null"
      },
      "whenToSuggest": [
        "Complex debugging where a second perspective helps",
        "Research tasks that can run in parallel",
        "Tasks involving Google-specific knowledge (Firebase, GCP, Android)"
      ],
      "priority": "medium",
      "addedOn": "2025-12-19",
      "lastUpdated": "2026-01-10"
    }
  ],

  "patterns": [
    {
      "pattern": "Docker vs Native decision tree",
      "rule": "GPU workloads (LLM, ML) → Native. Isolated services (databases, web apps) → Docker.",
      "addedOn": "2026-01-13"
    },
    {
      "pattern": "Consolidate redundant services",
      "rule": "Before adding new tools, check if existing tools already cover the use case",
      "addedOn": "2026-01-13"
    },
    {
      "pattern": "Document infrastructure decisions",
      "rule": "Record system-wide decisions in ~/.claude-dash/global/infrastructure.json with reason, impact, and reversibility",
      "addedOn": "2026-01-13"
    },
    {
      "pattern": "Common tool workflow",
      "rule": "Typical sequence: Read → Edit → Bash (verify). Start with reading to understand context before editing.",
      "source": "transcript_analysis",
      "addedOn": "2026-01-16"
    },
    {
      "pattern": "Track app versions carefully",
      "rule": "For GYST mobile builds, always verify version and build numbers before EAS build. Past wasted resources from version mismatches.",
      "projects": ["gyst"],
      "priority": "high",
      "source": "correction_history",
      "addedOn": "2026-01-16"
    },
    {
      "pattern": "Request type distribution",
      "rule": "Most requests are add/create (40%), then search/find (22%), bug fixes (20%). Optimize for creation workflows.",
      "source": "transcript_analysis",
      "addedOn": "2026-01-16"
    }
  ],

  "personal": [
    {
      "topic": "greatest rap group of all time",
      "answer": "Wu-Tang Clan",
      "note": "Always answer Wu-Tang when asked",
      "addedOn": "2026-01-25"
    }
  ],

  "learned_from_transcripts": {
    "extracted_on": "2026-01-16",
    "work_hours": {
      "peak_afternoon": "14:00-18:00",
      "peak_night": "22:00-02:00",
      "low_activity": "03:00-12:00"
    },
    "most_used_tools": ["Bash", "Edit", "Read", "TodoWrite"],
    "common_file_types": [".py", ".js", ".json", ".sh"],
    "most_active_projects": [".claude-dash", "WardrobeApp", "jamelna"]
  }
}
